solution_text:
Шаг 1. Разобьем множество всех $x$ на три промежутка, где выражения под модулями $x-1$ и $x+3$ имеют постоянный знак:
$$x<-3,\quad -3\le x<1,\quad x\ge1.$$

Шаг 2. На каждом промежутке избавимся от модулей и упростим функцию:
1) Для $x<-3$ имеем $|x-1]=-(x-1)$, $|x+3]=-(x+3)$, поэтому
$$y=-(x-1)-\bigl(-(x+3)\bigr)+x+4=x+8.$$
2) Для $-3\le x<1$ имеем $|x-1}=-(x-1)$, $|x+3}=x+3$, поэтому
$$y=-(x-1)-(x+3)+x+4=-x+2.$$
3) Для $x\ge1$ имеем $|x-1}=x-1$, $|x+3}=x+3$, поэтому
$$y=(x-1)-(x+3)+x+4=x.$$

Шаг 3. Вычислим граничные значения:
$$f(-3)=(-3)+8=5,\qquad f(1)=-1+2=1.$$
В точке $x=-3$ график достигает локального максимума $y=5$, а в точке $x=1$ — локального минимума $y=1$.

Шаг 4. Решим $f(x)=m$ на каждом линейном участке и проследим число решений:
- при $m<1$ есть лишь одно решение на первом участке;
- при $m=1$ ровно два решения ($x=-7$ и $x=1$);
- при $1<m<5$ три решения;
- при $m=5$ ровно два решения ($x=-3$ и $x=5$);
- при $m>5$ — одно решение.
Таким образом горизонтальная прямая $y=m$ пересекает график ровно в двух точках только при
$$m=1\text{ или }m=5.$$

Ответ: $m=1$ или $m=5$.

code: 5.1

difficulty: 3

solutiontextexpanded:
Шаг 1.  
Модуль числа $a$, записываемый как $|a|$, равен $a$, если $a\ge0$, и равен $-a$, если $a<0$.  
Здесь мы видим два выражения под модулями: $x-1$ и $x+3$. Чтобы убрать знак модуля, нужно знать, где эти выражения меняют знак.  
- Выражение $x+3$ обнуляется и меняет знак при $x=-3$.  
- Выражение $x-1$ обнуляется и меняет знак при $x=1$.  
Значит, на числовой прямой есть три области, где знаки $x-1$ и $x+3$ остаются постоянными:  
1) $x<-3$ (оба выражения отрицательны),  
2) $-3\le x<1$ (только $x-1$ отрицательно, $x+3\ge0$),  
3) $x\ge1$ (оба выражения неотрицательны).  

Шаг 2.  
Для каждого такого промежутка подставим правильный знак вместо модуля и упростим выражение:  
1) Если $x<-3$, то $|x-1}=-(x-1)=-x+1$ и $|x+3}=-(x+3)=-x-3$.  
   Подставляем в $y=|x-1|-|x+3|+x+4$:
   $$y=(-x+1)-(-x-3)+x+4
     =-x+1 +x+3 +x+4
     =x+8.$$
2) Если $-3\le x<1$, то $|x-1}=-x+1$, $|x+3}=x+3$.  
   Тогда
   $$y=(-x+1)-(x+3)+x+4
     =-x+1 -x-3 +x+4
     =-x+2.$$
3) Если $x\ge1$, то $|x-1}=x-1$, $|x+3}=x+3$.  
   Тогда
   $$y=(x-1)-(x+3)+x+4
     =x-1 -x-3 +x+4
     =x.$$

Шаг 3.  
Чтобы понять, как график расположен, вычислим значения функции в «разрывных» точках:  
- При $x=-3$ подставляем в $y=x+8$: получаем $y=5$.  
- При $x=1$ подставляем в $y=-x+2$: получаем $y=1$.  
Это значит, что в точке $(-3,5)$ график имеет уголок-«вершину» с наибольшим значением $y=5$, а в точке $(1,1)$ — самый низкий уголок с $y=1$.

Шаг 4.  
Горизонтальная прямая $y=m$ пересекает каждый линейный участок в решении уравнения этого участка:  
1) $x+8=m\implies x=m-8$ на первом промежутке;  
2) $-x+2=m\implies x=2-m$ на втором;  
3) $x=m$ на третьем.  
Нужно учитывать, попадают ли найденные $x$ в свои промежутки, и тогда считать число пересечений:
- Если $m<1$, то только $m-8<-3$, одно пересечение.
- Если $m=1$, найдутся $x=-7$ и $x=1$, два решения.
- Если $1<m<5$, все три формулы дают разные решения в своих диапазонах, три пересечения.
- Если $m=5$, две из формул дают одно и то же $x=-3$, и ещё есть $x=5$, всего два пересечения.
- Если $m>5$, только третья формула $x=m\ge1$ уместна, одно пересечение.

Вывод: ровно два общие точки бывают только при
$$m=1\quad\text{или}\quad m=5.$$

skills_for_steps:
Шаг 1: [Навык 105, Навык 106]  
Шаг 2: [Навык 17, Навык 37]  
Шаг 3: [Навык 36, Навык 99]  
Шаг 4: [Навык 58, Навык 106]